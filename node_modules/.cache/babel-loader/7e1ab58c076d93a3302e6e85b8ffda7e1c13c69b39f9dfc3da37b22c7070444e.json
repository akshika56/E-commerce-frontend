{"ast":null,"code":"import axios from'axios';// ✅ Use environment variable if available, otherwise fallback to Django backend\nconst API_BASE=process.env.REACT_APP_API_URL||'http://127.0.0.1:8000';// ✅ Fetch products from backend\nexport async function fetchProducts(){try{var _res$data;const res=await axios.get(\"\".concat(API_BASE,\"/api/products/\"),{headers:{'Content-Type':'application/json'}});// ✅ Normalize response\nif(Array.isArray(res.data)){return res.data;}else if((_res$data=res.data)!==null&&_res$data!==void 0&&_res$data.products&&Array.isArray(res.data.products)){return res.data.products;}else{console.warn('⚠️ Unexpected API format:',res.data);return[];}}catch(err){console.error('❌ API fetch failed:',err.message);// ✅ Fallback mock data (so UI still works)\nreturn[{id:1,name:'Toy Car',description:'Fun racing car',price:199,image:'/placeholder.png'},{id:2,name:'Doll',description:'Cute doll',price:299,image:'/placeholder.png'}];}}","map":{"version":3,"names":["axios","API_BASE","process","env","REACT_APP_API_URL","fetchProducts","_res$data","res","get","concat","headers","Array","isArray","data","products","console","warn","err","error","message","id","name","description","price","image"],"sources":["C:/Users/Akshika/Downloads/govind_toys_fixed_corrected/govind_toys/govind-toys/frontend/src/apiClient.js"],"sourcesContent":["import axios from 'axios';\n\n// ✅ Use environment variable if available, otherwise fallback to Django backend\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://127.0.0.1:8000';\n\n// ✅ Fetch products from backend\nexport async function fetchProducts() {\n  try {\n    const res = await axios.get(`${API_BASE}/api/products/`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    // ✅ Normalize response\n    if (Array.isArray(res.data)) {\n      return res.data;\n    } else if (res.data?.products && Array.isArray(res.data.products)) {\n      return res.data.products;\n    } else {\n      console.warn('⚠️ Unexpected API format:', res.data);\n      return [];\n    }\n  } catch (err) {\n    console.error('❌ API fetch failed:', err.message);\n\n    // ✅ Fallback mock data (so UI still works)\n    return [\n      {\n        id: 1,\n        name: 'Toy Car',\n        description: 'Fun racing car',\n        price: 199,\n        image: '/placeholder.png',\n      },\n      {\n        id: 2,\n        name: 'Doll',\n        description: 'Cute doll',\n        price: 299,\n        image: '/placeholder.png',\n      },\n    ];\n  }\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB;AACA,KAAM,CAAAC,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,uBAAuB,CAEzE;AACA,MAAO,eAAe,CAAAC,aAAaA,CAAA,CAAG,CACpC,GAAI,KAAAC,SAAA,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAP,KAAK,CAACQ,GAAG,IAAAC,MAAA,CAAIR,QAAQ,mBAAkB,CACvDS,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEF;AACA,GAAIC,KAAK,CAACC,OAAO,CAACL,GAAG,CAACM,IAAI,CAAC,CAAE,CAC3B,MAAO,CAAAN,GAAG,CAACM,IAAI,CACjB,CAAC,IAAM,IAAI,CAAAP,SAAA,CAAAC,GAAG,CAACM,IAAI,UAAAP,SAAA,WAARA,SAAA,CAAUQ,QAAQ,EAAIH,KAAK,CAACC,OAAO,CAACL,GAAG,CAACM,IAAI,CAACC,QAAQ,CAAC,CAAE,CACjE,MAAO,CAAAP,GAAG,CAACM,IAAI,CAACC,QAAQ,CAC1B,CAAC,IAAM,CACLC,OAAO,CAACC,IAAI,CAAC,2BAA2B,CAAET,GAAG,CAACM,IAAI,CAAC,CACnD,MAAO,EAAE,CACX,CACF,CAAE,MAAOI,GAAG,CAAE,CACZF,OAAO,CAACG,KAAK,CAAC,qBAAqB,CAAED,GAAG,CAACE,OAAO,CAAC,CAEjD;AACA,MAAO,CACL,CACEC,EAAE,CAAE,CAAC,CACLC,IAAI,CAAE,SAAS,CACfC,WAAW,CAAE,gBAAgB,CAC7BC,KAAK,CAAE,GAAG,CACVC,KAAK,CAAE,kBACT,CAAC,CACD,CACEJ,EAAE,CAAE,CAAC,CACLC,IAAI,CAAE,MAAM,CACZC,WAAW,CAAE,WAAW,CACxBC,KAAK,CAAE,GAAG,CACVC,KAAK,CAAE,kBACT,CAAC,CACF,CACH,CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}