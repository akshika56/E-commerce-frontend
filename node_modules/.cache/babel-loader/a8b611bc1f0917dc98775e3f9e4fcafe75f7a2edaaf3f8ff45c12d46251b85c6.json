{"ast":null,"code":"import axios from 'axios';\n\n// ✅ Use environment variable if available, otherwise fallback to Django backend\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://127.0.0.1:8000';\n\n// ✅ Fetch products from backend\nexport async function fetchProducts() {\n  try {\n    var _res$data;\n    const res = await axios.get(`${API_BASE}/api/products/`, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n\n    // ✅ Normalize response\n    if (Array.isArray(res.data)) {\n      return res.data;\n    } else if ((_res$data = res.data) !== null && _res$data !== void 0 && _res$data.products && Array.isArray(res.data.products)) {\n      return res.data.products;\n    } else {\n      console.warn('⚠️ Unexpected API format:', res.data);\n      return [];\n    }\n  } catch (err) {\n    console.error('❌ API fetch failed:', err.message);\n\n    // ✅ Fallback mock data (so UI still works)\n    return [{\n      id: 1,\n      name: 'Toy Car',\n      description: 'Fun racing car',\n      price: 199,\n      image: '/placeholder.png'\n    }, {\n      id: 2,\n      name: 'Doll',\n      description: 'Cute doll',\n      price: 299,\n      image: '/placeholder.png'\n    }];\n  }\n}","map":{"version":3,"names":["axios","API_BASE","process","env","REACT_APP_API_URL","fetchProducts","_res$data","res","get","headers","Array","isArray","data","products","console","warn","err","error","message","id","name","description","price","image"],"sources":["C:/Users/Akshika/Downloads/govind_toys_fixed_corrected/Govind toys/govind-toys/frontend/src/apiClient.js"],"sourcesContent":["import axios from 'axios';\n\n// ✅ Use environment variable if available, otherwise fallback to Django backend\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://127.0.0.1:8000';\n\n// ✅ Fetch products from backend\nexport async function fetchProducts() {\n  try {\n    const res = await axios.get(`${API_BASE}/api/products/`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    // ✅ Normalize response\n    if (Array.isArray(res.data)) {\n      return res.data;\n    } else if (res.data?.products && Array.isArray(res.data.products)) {\n      return res.data.products;\n    } else {\n      console.warn('⚠️ Unexpected API format:', res.data);\n      return [];\n    }\n  } catch (err) {\n    console.error('❌ API fetch failed:', err.message);\n\n    // ✅ Fallback mock data (so UI still works)\n    return [\n      {\n        id: 1,\n        name: 'Toy Car',\n        description: 'Fun racing car',\n        price: 199,\n        image: '/placeholder.png',\n      },\n      {\n        id: 2,\n        name: 'Doll',\n        description: 'Cute doll',\n        price: 299,\n        image: '/placeholder.png',\n      },\n    ];\n  }\n}\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;;AAEzE;AACA,OAAO,eAAeC,aAAaA,CAAA,EAAG;EACpC,IAAI;IAAA,IAAAC,SAAA;IACF,MAAMC,GAAG,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAAC,GAAGP,QAAQ,gBAAgB,EAAE;MACvDQ,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CAAC,CAAC;;IAEF;IACA,IAAIC,KAAK,CAACC,OAAO,CAACJ,GAAG,CAACK,IAAI,CAAC,EAAE;MAC3B,OAAOL,GAAG,CAACK,IAAI;IACjB,CAAC,MAAM,IAAI,CAAAN,SAAA,GAAAC,GAAG,CAACK,IAAI,cAAAN,SAAA,eAARA,SAAA,CAAUO,QAAQ,IAAIH,KAAK,CAACC,OAAO,CAACJ,GAAG,CAACK,IAAI,CAACC,QAAQ,CAAC,EAAE;MACjE,OAAON,GAAG,CAACK,IAAI,CAACC,QAAQ;IAC1B,CAAC,MAAM;MACLC,OAAO,CAACC,IAAI,CAAC,2BAA2B,EAAER,GAAG,CAACK,IAAI,CAAC;MACnD,OAAO,EAAE;IACX;EACF,CAAC,CAAC,OAAOI,GAAG,EAAE;IACZF,OAAO,CAACG,KAAK,CAAC,qBAAqB,EAAED,GAAG,CAACE,OAAO,CAAC;;IAEjD;IACA,OAAO,CACL;MACEC,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,SAAS;MACfC,WAAW,EAAE,gBAAgB;MAC7BC,KAAK,EAAE,GAAG;MACVC,KAAK,EAAE;IACT,CAAC,EACD;MACEJ,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,MAAM;MACZC,WAAW,EAAE,WAAW;MACxBC,KAAK,EAAE,GAAG;MACVC,KAAK,EAAE;IACT,CAAC,CACF;EACH;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}